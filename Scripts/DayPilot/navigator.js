
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilotNavigator==='undefined'){var DayPilotNavigator=DayPilot.NavigatorVisible={};};(function(){if(typeof DayPilot.Navigator!=='undefined'){return;};DayPilotNavigator={};DayPilotNavigator.Navigator=function(id){var $a=this;this.id=id;this.weekStarts=1;this.selectMode='day';this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];this.dayNames=["Su","Mo","Tu","We","Th","Fr","Sa"];this.titleHeight=20;this.dayHeaderHeight=20;this.cellWidth=20;this.cellHeight=20;this.selectionStart=new DayPilot.Date().getDatePart();this.selectionEnd=null;this.showMonths=1;this.skipMonths=1;this.timeRangeSelectedHandling="Bind";this.command="navigate";this.year=new DayPilot.Date().getYear();this.month=new DayPilot.Date().getMonth()+1;this.showWeekNumbers=false;this.weekNumberAlgorithm='Auto';this.prepare=function(){this.root.className=this.applyCssClass('main');this.root.style.width=(this.cellWidth*7+this.weekNumberWidth())+'px';this.root.style.height=(this.showMonths*(this.cellHeight*6+this.titleHeight+this.dayHeaderHeight))+'px';var $b=document.createElement("input");$b.type='hidden';$b.name=$a.id+"_state";$b.id=$b.name;this.root.appendChild($b);this.state=$b;if(this.startDate==null){this.startDate=new DayPilot.Date(DayPilot.Date.firstDayOfMonth(this.year,this.month));}else{this.startDate=new DayPilot.Date(this.startDate).firstDayOfMonth();};this.calendars=[];this.selected=[];this.months=[];};this.clearTable=function(){this.root.innerHTML='';};this.applyCssClass=function($c){if(this.cssClassPrefix){return this.cssClassPrefix+$c;}else{return "";}};this.addClass=function($d,name){var $e=this.applyCssClass(name);var $f=$d.className;if($d.className.indexOf($e)==-1){$f=$d.className+' '+$e;};$d.className=$f;};this.removeClass=function($d,name){var $e=this.applyCssClass(name);var $f=$d.className.replace($e,'');$d.className=$f;};this.drawTable=function($g,$h,$i,$j){var $k={};$k.cells=[];$k.days=[];$k.weeks=[];var $l=$g.firstDayOfMonth();var $m=$l.firstDayOfWeek(this.weekStarts);var $n=6;var $o=(new DayPilot.Date()).getDatePart();var $p=document.createElement("div");$p.style.width=(this.cellWidth*7+this.weekNumberWidth())+'px';$p.style.height=(this.cellHeight*$n+this.titleHeight+this.dayHeaderHeight)+'px';$p.className=this.applyCssClass('month');$p.style.position='relative';$p.style.cursor='default';$p.style.MozUserSelect='none';$p.month=$k;this.root.appendChild($p);var $q=this.titleHeight+this.dayHeaderHeight;var tl=document.createElement("div");tl.style.position='absolute';tl.style.left='0px';tl.style.top='0px';tl.style.width=this.cellWidth+'px';tl.style.height=this.titleHeight+'px';tl.style.lineHeight=this.titleHeight+'px';tl.style.textAlign='left';tl.style.cursor='pointer';tl.unselectable='on';tl.className=this.applyCssClass('titleleft');if($h){tl.innerHTML="<span style='margin-left:2px;'>&lt;</span>";tl.onclick=this.clickLeft;};$p.appendChild(tl);this.tl=tl;var ti=document.createElement("div");ti.style.position='absolute';ti.style.left=this.cellWidth+'px';ti.style.top='0px';ti.style.width=(this.cellWidth*5+this.weekNumberWidth())+'px';ti.style.height=this.titleHeight+'px';ti.style.lineHeight=this.titleHeight+'px';ti.style.textAlign='center';ti.unselectable='on';ti.className=this.applyCssClass('title');ti.innerHTML=this.monthNames[$g.getMonth()]+' '+$g.getYear();$p.appendChild(ti);this.ti=ti;var tr=document.createElement("div");tr.style.position='absolute';tr.style.left=(this.cellWidth*6+this.weekNumberWidth())+'px';tr.style.top='0px';tr.style.width=this.cellWidth+'px';tr.style.height=this.titleHeight+'px';tr.style.lineHeight=this.titleHeight+'px';tr.style.textAlign='right';tr.style.cursor='pointer';tr.unselectable='on';tr.className=this.applyCssClass('titleright');if($h){tr.innerHTML="<span style='margin-right:2px;'>&gt;</span>";tr.onclick=this.clickRight;};$p.appendChild(tr);this.tr=tr;var $r=this.weekNumberWidth();if(this.showWeekNumbers){for(var y=0;y<$n;y++){var $s=$m.addDays(y*7);var $t=null;switch(this.weekNumberAlgorithm){case "Auto":$t=(this.weekStarts===0)?$s.weekNumber():$s.weekNumberISO();break;case "US":$t=$s.weekNumber();break;case "ISO8601":$t=$s.weekNumberISO();break;default:throw "Unknown weekNumberAlgorithm value.";};var dh=document.createElement("div");dh.style.position='absolute';dh.style.left=(0)+'px';dh.style.top=(y*this.cellHeight+$q)+'px';dh.style.width=this.cellWidth+'px';dh.style.height=this.cellHeight+'px';dh.style.lineHeight=this.cellHeight+'px';dh.style.textAlign='right';dh.unselectable='on';dh.className=this.applyCssClass('weeknumber');dh.innerHTML="<span style='margin-right: 2px'>"+$t+"</span>";$p.appendChild(dh);$k.weeks.push(dh);}};for(var x=0;x<7;x++){$k.cells[x]=[];var dh=document.createElement("div");dh.style.position='absolute';dh.style.left=(x*this.cellWidth+$r)+'px';dh.style.top=this.titleHeight+'px';dh.style.width=this.cellWidth+'px';dh.style.height=this.dayHeaderHeight+'px';dh.style.lineHeight=this.dayHeaderHeight+'px';dh.style.textAlign='right';dh.unselectable='on';dh.className=this.applyCssClass('dayheader');dh.innerHTML="<span style='margin-right: 2px'>"+this.getDayName(x)+"</span>";$p.appendChild(dh);$k.days.push(dh);for(var y=0;y<$n;y++){var $s=$m.addDays(y*7+x);var $u=this.isSelected($s);var $v=$s.getMonth()==$g.getMonth();var $w=$s.getTime()<$g.getTime();var $x=$s.getTime()>$g.getTime();var $y;var dc=document.createElement("div");dc.day=$s;dc.x=x;dc.y=y;dc.isCurrentMonth=$v;dc.className=this.applyCssClass(($v?'day':'dayother'));if($s.getTime()==$o.getTime()&&$v){this.addClass(dc,'today');};if($s.dayOfWeek()==0||$s.dayOfWeek()==6){this.addClass(dc,'weekend');};dc.style.position='absolute';dc.style.left=(x*this.cellWidth+$r)+'px';dc.style.top=(y*this.cellHeight+$q)+'px';dc.style.width=this.cellWidth+'px';dc.style.height=this.cellHeight+'px';dc.style.lineHeight=this.cellHeight+'px';dc.style.textAlign='right';var $z=document.createElement("div");$z.style.position='absolute';$z.className=($s.getTime()==$o.getTime()&&$v)?this.applyCssClass('todaybox'):this.applyCssClass('daybox');$z.style.left='0px';$z.style.top='0px';$z.style.width=(this.cellWidth-2)+'px';$z.style.height=(this.cellHeight-2)+'px';dc.appendChild($z);if($v||($i&&$w)||($j&&$x)){var $A=document.createElement("span");$A.style.marginRight='2px';$A.innerHTML=$s.getDay();dc.appendChild($A);dc.style.cursor='pointer';dc.isClickable=true;if($u){this.addClass(dc,'select');}};dc.unselectable='on';dc.onclick=this.cellClick;dc.onmousedown=this.cellMouseDown;dc.onmousemove=this.cellMouseMove;if($u){this.selected.push(dc);};$p.appendChild(dc);$k.cells[x][y]=dc;}};var $B=document.createElement("div");$B.style.position='absolute';$B.style.left='0px';$B.style.top=($q-2)+'px';$B.style.width=(this.cellWidth*7+this.weekNumberWidth())+'px';$B.style.height='1px';$B.style.fontSize='1px';$B.style.lineHeight='1px';$B.className=this.applyCssClass("line");$p.appendChild($B);this.months.push($k);};this.weekNumberWidth=function(){if(this.showWeekNumbers){return this.cellWidth;};return 0;};this.updateFreeBusy=function(){if(this.items==null){return;};for(var j=0;j<this.showMonths;j++){for(var x=0;x<7;x++){for(var y=0;y<6;y++){var $C=this.months[j].cells[x][y];if(this.items[$C.day.toStringSortable()]==1){this.addClass($C,'busy');}else{this.removeClass($C,'busy');}}}}};this.saveState=function(){var s={};s.startDate=$a.startDate;s.selectionStart=$a.selectionStart;s.selectionEnd=$a.selectionEnd.addDays(1);$a.state.value=DayPilot.JSON.stringify(s);};this.adjustSelection=function(){switch(this.selectMode){case 'day':this.selectionEnd=this.selectionStart;break;case 'week':this.selectionStart=this.selectionStart.firstDayOfWeek(this.weekStarts);this.selectionEnd=this.selectionStart.addDays(6);break;case 'month':this.selectionStart=this.selectionStart.firstDayOfMonth();this.selectionEnd=this.selectionStart.lastDayOfMonth();break;default:throw "Unkown selectMode value.";}};this.select=function($D){var $E=true;var $F=this.selectionStart;var $G=this.selectionEnd;this.selectionStart=new DayPilot.Date($D).getDatePart();var $H=false;if($E){var $I=this.startDate;if(this.selectionStart.getTime()<this.visibleStart().getTime()||this.selectionStart.getTime()>this.visibleEnd().getTime()){$I=this.selectionStart.firstDayOfMonth();};if($I.toStringSortable()!=this.startDate.toStringSortable()){$H=true;};this.startDate=$I;};this.adjustSelection();this.clearTable();this.prepare();this.drawMonths();this.updateFreeBusy();this.saveState();if(!$F.equals(this.selectionStart)||!$G.equals(this.selectionEnd)){this.timeRangeSelectedDispatch();};if($H){this.visibleRangeChanged();}};this.callBack2=function($J,$K,$L){var $M={};$M.action=$J;$M.parameters=$L;$M.data=$K;$M.header=this.getCallBackHeader();var $N="JSON"+DayPilot.JSON.stringify($M);WebForm_DoCallback(this.uniqueID,$N,this.updateView,this.clientName,this.callbackError,true);};this.postBack2=function($J,$K,$L){var $M={};$M.action=$J;$M.parameters=$L;$M.data=$K;$M.header=this.getCallBackHeader();var $N="JSON"+DayPilot.JSON.stringify($M);__doPostBack($a.uniqueID,$N);};this.getCallBackHeader=function(){var h={};h.startDate=this.startDate;h.selectionStart=this.selectionStart;return h;};this.listen=function($J,$K){if($J=='refresh'){this.visibleRangeChanged();}};this.getDayName=function(i){var x=i+this.weekStarts;if(x>6){x-=7;};return this.dayNames[x];};this.isSelected=function($D){if(this.selectionStart==null||this.selectionEnd==null){return false;};if(this.selectionStart.getTime()<=$D.getTime()&&$D.getTime()<=this.selectionEnd.getTime()){return true;};return false;};this.cellMouseDown=function(ev){};this.cellMouseMove=function(ev){};this.cellClick=function(ev){var $k=this.parentNode.month;var x=this.x;var y=this.y;var $s=$k.cells[x][y].day;if(!$k.cells[x][y].isClickable){return;};$a.clearSelection();switch($a.selectMode){case 'day':var s=$k.cells[x][y];$a.addClass(s,'select');$a.selected.push(s);$a.selectionStart=s.day;$a.selectionEnd=s.day;break;case 'week':for(var j=0;j<7;j++){$a.addClass($k.cells[j][y],'select');$a.selected.push($k.cells[j][y]);};$a.selectionStart=$k.cells[0][y].day;$a.selectionEnd=$k.cells[6][y].day;break;case 'month':var $O=null;var end=null;for(var y=0;y<6;y++){for(var x=0;x<7;x++){var s=$k.cells[x][y];if(s.day.getYear()==$s.getYear()&&s.day.getMonth()==$s.getMonth()){$a.addClass(s,'select');$a.selected.push(s);if($O==null){$O=s.day;};end=s.day;}}};$a.selectionStart=$O;$a.selectionEnd=end;break;default:throw 'unknown selectMode';};$a.saveState();$a.timeRangeSelectedDispatch();};this.timeRangeSelectedDispatch=function(){var $O=$a.selectionStart;var end=$a.selectionEnd.addDays(1);var $P=DayPilot.Date.daysDiff($O.d,end.d);switch($a.timeRangeSelectedHandling){case 'Bind':var $Q=eval($a.bound);if($Q!=null){var $R={};$R.start=$O;$R.end=end;$R.days=$P;$Q.commandCallBack($a.command,$R);};break;case 'JavaScript':$a.onTimeRangeSelected($O,end);break;case 'None':break;case 'PostBack':$a.timeRangeSelectedPostBack($O,end);break;}};this.timeRangeSelectedPostBack=function($O,end,$K){var $S={};$S.start=$O;$S.end=end;this.postBack2('TimeRangeSelected',$K,$S);};this.clickRight=function(ev){$a.moveMonth($a.skipMonths);};this.clickLeft=function(ev){$a.moveMonth(-$a.skipMonths);};this.moveMonth=function(i){this.startDate=this.startDate.addMonths(i);this.clearTable();this.prepare();this.drawMonths();this.saveState();this.visibleRangeChanged();};this.visibleStart=function(){return $a.startDate.firstDayOfMonth().firstDayOfWeek(this.weekStarts);};this.visibleEnd=function(){return $a.startDate.firstDayOfMonth().addMonths(this.showMonths-1).firstDayOfWeek(this.weekStarts).addDays(42);};this.visibleRangeChanged=function(){var $O=this.visibleStart();var end=this.visibleEnd();switch(this.visibleRangeChangedHandling){case "CallBack":this.visibleRangeChangedCallBack(null);break;case "PostBack":this.visibleRangeChangedPostBack(null);break;case "JavaScript":this.onVisibleRangeChanged($O,end);break;case "Disabled":break;}};this.visibleRangeChangedCallBack=function($K){var $L={};this.callBack2("Visible",$K,$L);};this.visibleRangeChangedPostBack=function($K){var $L={};this.postBack2("Visible",$K,$L);};this.updateView=function($T,$U){var $T=eval("("+$T+")");$a.items=$T.Items;$a.updateFreeBusy();};this.drawMonths=function(){for(var j=0;j<this.showMonths;j++){this.drawTable(this.startDate.addMonths(j),j==0,j==0,j==this.showMonths-1);}};this.clearSelection=function(){for(var j=0;j<this.selected.length;j++){this.removeClass(this.selected[j],'select');};this.selected=[];};this.Init=function(){this.root=document.getElementById(id);this.adjustSelection();this.prepare();this.drawMonths();this.updateFreeBusy();};};DayPilot.NavigatorVisible.Navigator=DayPilotNavigator.Navigator;DayPilot.Navigator=DayPilotNavigator.Navigator;})();


