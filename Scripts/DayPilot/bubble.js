
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilotBubble==='undefined'){var DayPilotBubble=DayPilot.BubbleVisible={};};(function(){if(typeof DayPilot.Bubble!=='undefined'){return;};var DayPilotBubble={};DayPilotBubble.mouseMove=function(ev){if(typeof(DayPilotBubble)==='undefined')return;DayPilotBubble.mouse=DayPilotBubble.mousePosition(ev);};DayPilotBubble.mousePosition=function(e){var $a=0;var $b=0;if(!e)var e=window.event;if(e.pageX||e.pageY){$a=e.pageX;$b=e.pageY;}else if(e.clientX||e.clientY){$a=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;$b=e.clientY+document.body.scrollTop+document.documentElement.scrollTop;};var $c={};$c.x=$a;$c.y=$b;$c.clientY=e.clientY;$c.clientX=e.clientX;return $c;};DayPilotBubble.Bubble=function(id){var $d=this;this.zIndex=10;this.showLoadingLabel=true;this.loadingText="Loading...";this.useShadow=true;this.showAfter=500;this.hideAfter=500;this.border="1px solid #000000";this.backgroundColor="#ffffff";this.corners='Rounded';this.position="EventTop";this.elements={};var $e=false;if(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!=-1){if(document.compatMode&&document.compatMode=="BackCompat"){$e=true;}};this.callBack=function($f){if(this.aspnet()){WebForm_DoCallback(this.uniqueID,DayPilot.JSON.stringify($f),this.updateView,this,this.callbackError,true);}else{$f.calendar.bubbleCallBack($f,this);}};this.callbackError=function($c,$g){alert($c);};this.updateView=function($c,$g){if($d!==$g){throw "Callback object mismatch (internal error)";};DayPilotBubble.active=$d;if($d){if($d.elements.div){$d.elements.div.innerHTML=$c;};$d.adjustPosition();$d.addShadow();}};this.init=function(){DayPilot.re(document.body,'mousemove',DayPilotBubble.mouseMove);};this.aspnet=function(){return(typeof WebForm_DoCallback!=='undefined');};this.rounded=function(){return this.corners=='Rounded';};this.showEvent=function(e){var a=new DayPilotBubble.CallBackArgs(e.calendar||e.root,'Event',e,e.staticBubbleHTML?e.staticBubbleHTML():null);this.showOnMouseOver(a);};this.showCell=function($h){var a=new DayPilotBubble.CallBackArgs($h.calendar||$h.root,'Cell',$h,$h.staticBubbleHTML?$h.staticBubbleHTML():null);this.showOnMouseOver(a);};this.showTime=function($i){var a=new DayPilotBubble.CallBackArgs($i.calendar||$i.root,'Time',$i,$i.staticBubbleHTML?$i.staticBubbleHTML():null);this.showOnMouseOver(a);};this.showResource=function($j){var a=new DayPilotBubble.CallBackArgs($j.calendar||$j.root,'Resource',$j,$j.staticBubbleHTML?$j.staticBubbleHTML():null);this.showOnMouseOver(a);};this.show=function($k){var id=DayPilot.JSON.stringify($k.object);if(DayPilotBubble.active===this&&this.sourceId===id){return;};if(typeof DayPilot.Menu!=='undefined'&&DayPilot.Menu.active){return;};DayPilotBubble.hideActive();DayPilotBubble.active=this;this.sourceId=id;var $l=document.createElement("div");if(!this.showLoadingLabel){$l.style.display='none';};document.body.appendChild($l);if(this.border){$l.style.border=this.border;};if(this.width){$l.style.width=this.width;};$l.style.backgroundColor=this.backgroundColor;$l.style.position='absolute';$l.style.padding='4px';$l.style.cursor='default';$l.style.top='0px';$l.style.left='0px';$l.style.zIndex=this.zIndex+1;if(this.rounded()){$l.style.MozBorderRadius="5px";$l.style.webkitBorderRadius="5px";$l.style.borderRadius="5px";};$l.onclick=function(){DayPilotBubble.hideActive();};$l.onmouseover=function(){DayPilotBubble.cancelTimeout();};$l.oncontextmenu=function(){return false;};$l.onmouseout=this.delayedHide;$l.innerHTML=this.loadingText;this.elements.div=$l;if(this.position=="EventTop"&&$k.type=='Event'&&$k.object.calendar&&$k.object.calendar.findEventDiv){var $m=2;var event=$k.object;var $l=event.calendar.findEventDiv(event);var $n=DayPilot.abs($l);this.mouse=DayPilotBubble.mouse;this.mouse.x=$n.x;this.mouse.y=$n.y;this.mouse.h=$n.h+2;this.mouse.w=$n.w;}else{this.mouse=DayPilotBubble.mouse;};if(this.showLoadingLabel){this.adjustPosition();this.addShadow();};if($k.staticHTML){this.updateView($k.staticHTML,this);}else{this.callBack($k);}};this.loadingElement=null;this.loadingStart=function($n){};this.loadingStop=function(){};this.adjustPosition=function(){var $o=this.position;var $p=10;if(!this.elements.div){return;};var $l=this.elements.div;$l.style.display='';var $q=$l.clientHeight;var $r=$l.clientWidth;$l.style.display='none';var $s=document.documentElement.clientHeight;if($e){$s=document.body.clientHeight;};var $t=document.documentElement.clientWidth;if($e){$t=document.body.clientWidth;};if($o==='Mouse'){var $u=22;var $v=10;if(this.mouse.clientY>$s-$q+$p){var $w=this.mouse.clientY-($s-$q)+$p;$l.style.top=(this.mouse.y-$q-$v)+'px';}else{$l.style.top=this.mouse.y+$u+'px';};if(this.mouse.clientX>$t-$r+$p){var $x=this.mouse.clientX-($t-$r)+$p;$l.style.left=(this.mouse.x-$x)+'px';}else{$l.style.left=this.mouse.x+'px';}}else if($o==='EventTop'){var $y=2;var top=this.mouse.y-$q-$y;var $z=document.documentElement.scrollTop;if($e){$z=document.body.scrollTop;};if(top<$z){top=this.mouse.y+this.mouse.h+$y;};$l.style.top=top+'px';var $A=this.mouse.x;if(this.mouse.x+$r+$p>$t){$A=$t-$r-$p;};$l.style.left=$A+'px';};$l.style.display='';};this.delayedHide=function(){DayPilotBubble.cancelTimeout();if($d.hideAfter>0){DayPilotBubble.timeout=window.setTimeout("DayPilotBubble.hideActive()",$d.hideAfter);}};this.showOnMouseOver=function($k){DayPilotBubble.cancelTimeout();var $B=function($C){return function(){$d.show($C);};};DayPilotBubble.timeout=window.setTimeout($B($k),this.showAfter);};this.hideOnMouseOut=function(){this.delayedHide();};this.addShadow=function(){if(!this.useShadow){return;};if(!this.elements.div){return;};var $l=this.elements.div;if(this.shadows&&this.shadows.length>0){this.removeShadow();};this.shadows=[];for(var i=0;i<5;i++){var $D=document.createElement('div');$D.style.position='absolute';$D.style.width=$l.offsetWidth+'px';$D.style.height=$l.offsetHeight+'px';$D.style.top=$l.offsetTop+i+'px';$D.style.left=$l.offsetLeft+i+'px';$D.style.zIndex=this.zIndex;$D.style.filter='alpha(opacity:10)';$D.style.opacity=0.1;$D.style.backgroundColor='#000000';if(this.rounded()){$D.style.MozBorderRadius="5px";$D.style.webkitBorderRadius="5px";$D.style.borderRadius="5px";};document.body.appendChild($D);this.shadows.push($D);}};this.removeShadow=function(){if(!this.shadows){return;};for(var i=0;i<this.shadows.length;i++){document.body.removeChild(this.shadows[i]);};this.shadows=[];};this.removeDiv=function(){if(!this.elements.div){return;};document.body.removeChild(this.elements.div);this.elements.div=null;};this.init();};DayPilotBubble.cancelTimeout=function(){if(DayPilotBubble.timeout){window.clearTimeout(DayPilotBubble.timeout);}};DayPilotBubble.hideActive=function(){DayPilotBubble.cancelTimeout();var $d=DayPilotBubble.active;if($d){$d.removeDiv();$d.removeShadow();};DayPilotBubble.active=null;};DayPilotBubble.CallBackArgs=function($E,$F,$G,$H){this.calendar=$E;this.type=$F;this.object=$G;this.staticHTML=$H;this.toJSON=function(){var $I={};$I.uid=this.calendar.uniqueID;$I.type=this.type;$I.object=$G;return $I;};};DayPilot.BubbleVisible.Bubble=DayPilotBubble.Bubble;DayPilot.BubbleVisible.hideActive=DayPilotBubble.hideActive;DayPilot.BubbleVisible.cancelTimeout=DayPilotBubble.cancelTimeout;DayPilot.Bubble=DayPilotBubble.Bubble;DayPilot.Bubble.hideActive=DayPilotBubble.hideActive;})();

